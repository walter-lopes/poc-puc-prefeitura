@model SGM_MVC.Models.Servico.Protocol

@{
    ViewData["Title"] = "Atualização de Situação de Protocolo";
}

<div>
    <h3>Atualização de Situação de Protocolo</h3>
    <div>
        <h4>Informações do Protocolo</h4>

        <hr />
        <dl class="row">
            <dt class="col-sm-2">
                Protocolo
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Codigo)
            </dd>
            <dt class="col-sm-2">
                Serviço
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Name)
            </dd>
            <dt class="col-sm-2">
                Data de Registro
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.CreateDate)
            </dd>
            <dt class="col-sm-2">
                Última Atualização
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.UpdateDate)
            </dd>
            <dt class="col-sm-2">
                Solicitante
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Person.Name)
            </dd>
            <dt class="col-sm-2">
                Email Solicitante
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Person.Contact.Email)
            </dd>
            <dt class="col-sm-2">
                Telefone Solicitante
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Person.Contact.Phone)
            </dd>
        </dl>
    </div>
    <table class="table">
        <thead>
            <tr>
                <th>
                    Situação
                </th>
                <th>
                    Data
                </th>
                <th>
                    Responsável
                </th>
                <th>Email do Responsável</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.History != null)
            {
                @foreach (var item in Model.History)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Status)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.UpdateDate)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Employee)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.EmployeeMail)
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>
<div>
    <a asp-action="PesquisaProtocolo" class="btn btn-primary">Voltar</a>
    @if (User.IsInRole("vereador"))
    {
        <a asp-action="AtualizaProtocolo" class="btn btn-primary">Salvar</a>
    }

</div>
